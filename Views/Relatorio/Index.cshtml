@{
    Layout = "~/Views/Shared/_Layout_Gerenciamento.cshtml";
}
<style>
    /* Estilo para a box-container */
    .box-container {
        padding: 30px;
        margin-bottom: 30px;
        background-color: #b7b5b5;
        ;
        border-radius: 8px;
        box-shadow: 0 4px 8px #fc0fc0;
        height: auto; /* Ajuste para a altura ser dinâmica */
    }

    /* Estilo para a container da página */
    .container.page-maneger {
        padding: 20px;
        background-color: #000000;
        border-radius: 8px;
        box-shadow: 0 8px 8px #fc0fc0;
        min-height: 400px; /* Altura mínima para a div */
        height: auto; /* Deixe a altura da div crescer conforme o conteúdo */
        border-top: 2px solid #fc0fc0; /* Borda no topo */
    }

    /* Filtro Input e Select */
    .filter-group {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }

        .filter-group > div {
            flex: 1;
            margin-right: 10px;
        }

            .filter-group > div:last-child {
                margin-right: 0;
            }

    .filter-input,
    .filter-select {
        width: 100%;
        padding: 12px;
        font-size: 16px;
        border-radius: 5px;
        border: 1px solid black;
        box-sizing: border-box;
        transition: all 0.3s ease;
    }

        .filter-input:focus,
        .filter-select:focus {
            border-color: chocolate;
            outline: none;
        }

    /* Botão de pesquisa */
    .btn {
        padding: 12px 25px;
        background-color: chocolate;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

        .btn:hover {
            background-color: chocolate;
        }

    /* Estilos para a tabela */

    /* Estilos para a tabela */
    #tabelaAgendamentos {
        margin-top: 20px;
        width: 100%;
        color: white; /* Texto verde */
        background-color: white; /* Fundo preto para a tabela */
        border-collapse: collapse; /* Garante que as bordas fiquem colapsadas */
        font-family: Arial, sans-serif; /* Fonte mais clean */
    }

        /* Estilo das células da tabela */
        #tabelaAgendamentos th, #tabelaAgendamentos td {
            padding: 12px 15px;
            text-align: left; /* Alinha o texto à esquerda */
            border: 1px solid black; /* Cor escura nas bordas */
        }

        /* Estilo para os cabeçalhos da tabela */
        #tabelaAgendamentos th {
            background-color: chocolate; /* Fundo escuro para os cabeçalhos */
            color: white; /* Cor verde neon para o texto dos cabeçalhos */
            font-weight: bold;
        }

        /* Estilo para as linhas da tabela (alternando a cor das linhas para facilitar leitura) */
        #tabelaAgendamentos tr:nth-child(even) {
            background-color: # ; /* Cor escura para linhas pares */
        }

        #tabelaAgendamentos tr:nth-child(odd) {
            background-color: #444; /* Cor um pouco mais clara para as linhas ímpares */
        }

        /* Estilo para o foco nos links (caso haja links na tabela) */
        #tabelaAgendamentos a {
            color: chocolate; /* Verde neon para links */
            text-decoration: none; /* Remove o sublinhado */
        }

            #tabelaAgendamentos a:hover {
                text-decoration: underline; /* Sublinha ao passar o mouse */
            }

    /* Estilo para o botão de pesquisa */
    .btn-pesquisar {
        background-color: chocolate; /* Cor verde */
        color: white;
        padding: 8px 16px; /* Diminuir o tamanho do botão */
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

        .btn-pesquisar:hover {
            background-color: chocolate; /* Cor verde mais escura ao passar o mouse */
        }

    /* Estilo para centralizar os botões de exportação */
    .center-buttons {
        text-align: center;
        margin-bottom: 20px; /* Para dar um espaçamento entre os botões e a tabela */
        margin-top: 20px; /* Espaçamento superior para os botões de exportação */
    }

        .center-buttons .btn {
            display: inline-block;
            margin: 0 10px; /* Espaçamento entre os botões */
            background-color: chocolate; /* Cor verde */
            color: white;
            padding: 8px 16px; /* Botões menores */
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

            .center-buttons .btn:hover {
                background-color: chocolate; /* Cor verde mais escura ao passar o mouse */
            }

    /* Adicionando espaçamento entre a tabela e o "Mostrar registros" */
    .dataTables_info {
        margin-top: 20px; /* Espaço superior maior entre a tabela e a contagem */
    }

    #tabelaAgendamentos_filter {
        padding: 2px; /* Espaçamento interno ao redor do campo de filtro */
        border-radius: 2px; /* Borda arredondada */
    }

        #tabelaAgendamentos_filter input {
            border: none; /* Remove a borda do campo de entrada */
            padding: 5px; /* Ajusta o preenchimento interno do campo de entrada */
            color: white; /* Cor do texto no campo */
            background-color: white; /* Cor de fundo preta para o campo de entrada */
        }

    


</style>

<body style="background-color: #000000;">

    <section class="maneger-page-section">
        <div class="container page-maneger">

            <div class="add-user-button">
                <h2 class="section-title cliente-title-maneger" style="color:fc0fc0!important  ">Relatório</h2>
            </div>
            <section class="home" id="home">
                <div class="filter-group">
                    <div>
                        <label for="campo1" style="color:#fc0fc0">Escolha a coluna 1:</label>
                        <select id="campo1" class="filter-select">
                            <option value="" selected disabled>Selecione um campo para filtrar</option>
                            <option value="DataAgendamento">Data do Agendamento</option>
                            <option value="Horario">Horario do Atendimento</option>
                            <option value="TipoServico">Tipo do serviço</option>
                            <option value="Valor">Valor do serviço</option>
                            <option value="Nome">Nome do cliente</option>
                            <option value="Email">Email do cliente</option>
                            <option value="Telefone">Telefone do cliente</option>
                        </select>
                    </div>
                    <div>
                        <label for="valor1" style="color:#fc0fc0">Filtro 1:</label>
                        <input type="text" id="valor1" placeholder="Digite o filtro" class="filter-input">
                    </div>
                </div>
                <div class="filter-group">
                    <div>
                        <label for="campo2" style="color:#fc0fc0">Escolha a coluna 2:</label>
                        <select id="campo2" class="filter-select">
                            <option value="" selected disabled>Selecione um campo para filtrar</option>
                            <option value="DataAgendamento">Data do Agendamento</option>
                            <option value="Horario">Horario do Atendimento</option>
                            <option value="TipoServico">Tipo do serviço</option>
                            <option value="Valor">Valor do serviço</option>
                            <option value="Nome">Nome do cliente</option>
                            <option value="Email">Email do cliente</option>
                            <option value="Telefone">Telefone do cliente</option>
                        </select>
                    </div>
                    <div>
                        <label for="valor2" style="color:#fc0fc0">Filtro 2:</label>
                        <input type="text" id="valor2" placeholder="Digite o filtro" class="filter-input">
                    </div>
                </div>
                <div class="filter-group">
                    <div>
                        <label for="campo3" style="color:#fc0fc0">Escolha a coluna 3:</label>
                        <select id="campo3" class="filter-select">
                            <option value="" selected disabled>Selecione um campo para filtrar</option>
                            <option value="DataAgendamento">Data do Agendamento</option>
                            <option value="Horario">Horario do Atendimento</option>
                            <option value="TipoServico">Tipo do serviço</option>
                            <option value="Valor">Valor do serviço</option>
                            <option value="Nome">Nome do cliente</option>
                            <option value="Email">Email do cliente</option>
                            <option value="Telefone">Telefone do cliente</option>
                        </select>
                    </div>
                    <div>
                        <label for="valor3" style="color:#fc0fc0">Filtro 3:</label>
                        <input type="text" id="valor3" placeholder="Digite o filtro" class="filter-input">
                    </div>
                </div>
                <button id="pesquisarBtn" class="btn" onclick="filtrarAgendamentos()">Pesquisar</button>
                <br>
                <br>
                <!-- Tabela para exibir os agendamentos -->
                <div class="box-container">
                    <table id="tabelaAgendamentos" class="table table-striped"></table>
                </div>
                <br />
            </section>
        </div>
    </section>

    <!-- Inclusão do jQuery e DataTables -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.pdfMake.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">

    <script>
        function filtrarAgendamentos() {
            var campo1 = $('#campo1').val();
            var campo2 = $('#campo2').val();
            var campo3 = $('#campo3').val();
            var valor1 = $('#valor1').val();
            var valor2 = $('#valor2').val();
            var valor3 = $('#valor3').val();

            console.log(campo1, campo2, campo3, valor1, valor2, valor3);


            // Fazer a requisição AJAX para filtrar os agendamentos
            $.ajax({
                url: '/Relatorio/GetAgendamentos',  // Substitua 'SeuController' pelo nome do seu controller
                type: 'GET',
                data: {
                    campo1: campo1,
                    campo2: campo2,
                    campo3: campo3,
                    valor1: valor1,
                    valor2: valor2,
                    valor3: valor3
                },
                        success: function (resultado) {
            console.log('Resultado:', resultado);  // Verifique o que está sendo retornado
            if (resultado && resultado.length > 0) {
                // Primeiro, destrua a instância anterior da tabela
                if ($.fn.dataTable.isDataTable('#tabelaAgendamentos')) {
                    $('#tabelaAgendamentos').DataTable().clear().destroy();
                }

                // Inicializa ou reinicializa a tabela com os novos dados
                $('#tabelaAgendamentos').DataTable({
                    data: resultado,
                    columns: [
                        { title: 'Data do Agendamento', data: 'dataAgendamento' },
                        { title: 'Horario do Atendimento', data: 'horario' },
                        { title: 'Tipo do Serviço', data: 'tipoServico' },
                        { title: 'Valor do Serviço', data: 'valor' },
                        { title: 'Nome do Cliente', data: 'nome' },
                        { title: 'Email do Cliente', data: 'email' },
                        { title: 'Telefone do Cliente', data: 'telefone' }
                    ],
                    language: {
                        url: 'https://cdn.datatables.net/plug-ins/1.10.21/i18n/Portuguese.json'
                    },
                    dom: '<"left-buttons"B>lfrtip', // Centraliza os botões de exportação
                    
                    
                    initComplete: function () {
                        var api = this.api();
                        api.columns().every(function () {
                            var column = this;
                            $(column.header()).css('background-color', '#000000');
                            $(column.header()).css('color', '#db22ac'); // Cabeçalhos
                        });
                    },
                    rowCallback: function (row, data, index) {
                        if (index % 2 === 0) {
                            $(row).css('background-color', '#000000'); // Linhas pares com fundo mais escuro
                        } else {
                            $(row).css('background-color', '#000000'); // Linhas ímpares com fundo mais claro
                        }
                    }
                });
            } else {
                alert('Nenhum agendamento encontrado.');
            }
        },

                error: function (xhr, status, error) {
                    console.error('Erro ao buscar agendamentos:', error);
                }
            });
        }





    </script>
</body>

